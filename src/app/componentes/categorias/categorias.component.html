<div class="header">
  <app-navbar></app-navbar>
</div>

<p-card header="Gestión de Categorías" [style]="{ width: '100%' }">
  <div class="contenedor-categorias">
    <!-- Sección del Formulario -->
    <div class="seccion-formulario">
      <h3>{{ categoriaEdicion ? 'Editar Categoría' : 'Agregar Categoría' }}</h3>
      <form [formGroup]="categoriaForm" (ngSubmit)="agregarCategoria()">
        <div class="p-fluid">
          <div class="field">
            <label for="nombre">Nombre</label>
            <input id="nombre" type="text" pInputText formControlName="nombre" class="input-texto"/>
          </div>
          <p>
            <p-button 
              [label]="categoriaEdicion ? 'Actualizar' : 'Agregar'" 
              icon="pi pi-plus" 
              styleClass="boton-agregar" 
              [disabled]="categoriaForm.invalid" 
              type="submit">
            </p-button>
            <p-button *ngIf="categoriaEdicion" label="Cancelar" icon="pi pi-times" 
              styleClass="boton-cancelar" (click)="cancelarEdicion()">
            </p-button>
          </p>
        </div>
      </form>
    </div>

    <!-- Sección de Categorías -->
    <div class="seccion-categorias">
      <h3>Lista de Categorías</h3>
      <p-table [value]="categorias" [responsive]="true" class="tabla-categorias">
        <ng-template pTemplate="header">
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Acciones</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-categoria>
          <tr>
            <td>{{ categoria.id }}</td>
            <td>{{ categoria.nombre }}</td>
            <td>
              <p-button icon="pi pi-pencil" styleClass="boton-accion boton-editar" (click)="editarCategoria(categoria)"></p-button>
              <p-button icon="pi pi-trash" styleClass="boton-accion boton-eliminar" (click)="eliminarCategoria(categoria.id)"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</p-card>
